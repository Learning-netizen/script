-- Initial setup
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local RunService = game:GetService("RunService")

-- Function to disable collisions for all character parts
local function disableCollisions()
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end
end

-- Noclip logic
RunService.Stepped:Connect(function()
    disableCollisions()
end)

-- Initial activation of noclip
disableCollisions()
print("Noclip enabled")

-- Function to move character
local function moveCharacter()
    local moveDirection = Vector3.new()
    local UserInputService = game:GetService("UserInputService")

    if UserInputService:IsKeyDown(Enum.KeyCode.W) then
        moveDirection = moveDirection + (character.PrimaryPart.CFrame.LookVector * 1)
    end
    if UserInputService:IsKeyDown(Enum.KeyCode.S) then
        moveDirection = moveDirection - (character.PrimaryPart.CFrame.LookVector * 1)
    end
    if UserInputService:IsKeyDown(Enum.KeyCode.A) then
        moveDirection = moveDirection - (character.PrimaryPart.CFrame.RightVector * 1)
    end
    if UserInputService:IsKeyDown(Enum.KeyCode.D) then
        moveDirection = moveDirection + (character.PrimaryPart.CFrame.RightVector * 1)
    end

    character:SetPrimaryPartCFrame(character.PrimaryPart.CFrame + moveDirection)
end

-- Continuously move character while noclip is active
RunService.Stepped:Connect(moveCharacter)
